<Window x:Class="Ops.Console.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="CongNo Ops - Mission Control" Height="860" Width="1300"
        Icon="Assets/ops-console.ico"
        WindowStartupLocation="CenterScreen" Background="#F8FAFC"
        FontFamily="Bahnschrift">
    <Window.Resources>
        <Color x:Key="ColorSurface">#FFFFFF</Color>
        <Color x:Key="ColorSurfaceMuted">#F1F5F9</Color>
        <Color x:Key="ColorBorder">#E2E8F0</Color>
        <Color x:Key="ColorPrimary">#2563EB</Color>
        <Color x:Key="ColorPrimaryDark">#1D4ED8</Color>
        <Color x:Key="ColorAccent">#F97316</Color>
        <Color x:Key="ColorSuccess">#16A34A</Color>
        <Color x:Key="ColorWarning">#F59E0B</Color>
        <Color x:Key="ColorDanger">#DC2626</Color>
        <Color x:Key="ColorDangerDark">#B91C1C</Color>
        <Color x:Key="ColorText">#1E293B</Color>
        <Color x:Key="ColorMutedText">#64748B</Color>

        <SolidColorBrush x:Key="BrushSurface" Color="{StaticResource ColorSurface}" />
        <SolidColorBrush x:Key="BrushSurfaceMuted" Color="{StaticResource ColorSurfaceMuted}" />
        <SolidColorBrush x:Key="BrushBorder" Color="{StaticResource ColorBorder}" />
        <SolidColorBrush x:Key="BrushPrimary" Color="{StaticResource ColorPrimary}" />
        <SolidColorBrush x:Key="BrushPrimaryDark" Color="{StaticResource ColorPrimaryDark}" />
        <SolidColorBrush x:Key="BrushAccent" Color="{StaticResource ColorAccent}" />
        <SolidColorBrush x:Key="BrushSuccess" Color="{StaticResource ColorSuccess}" />
        <SolidColorBrush x:Key="BrushWarning" Color="{StaticResource ColorWarning}" />
        <SolidColorBrush x:Key="BrushDanger" Color="{StaticResource ColorDanger}" />
        <SolidColorBrush x:Key="BrushDangerDark" Color="{StaticResource ColorDangerDark}" />
        <SolidColorBrush x:Key="BrushText" Color="{StaticResource ColorText}" />
        <SolidColorBrush x:Key="BrushMutedText" Color="{StaticResource ColorMutedText}" />

        <Style TargetType="Button">
            <Setter Property="Padding" Value="12,8" />
            <Setter Property="Margin" Value="4,0" />
            <Setter Property="Background" Value="{StaticResource BrushPrimary}" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="BorderBrush" Value="{StaticResource BrushPrimaryDark}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="MinWidth" Value="90" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="ButtonBorder"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="ButtonBorder" Property="Opacity" Value="0.92" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="ButtonBorder" Property="Opacity" Value="0.85" />
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="ButtonBorder" Property="Opacity" Value="0.5" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="SecondaryButton" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
            <Setter Property="Background" Value="#E2E8F0" />
            <Setter Property="Foreground" Value="{StaticResource BrushText}" />
            <Setter Property="BorderBrush" Value="#CBD5E1" />
        </Style>
        <Style x:Key="AccentButton" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
            <Setter Property="Background" Value="{StaticResource BrushAccent}" />
            <Setter Property="BorderBrush" Value="#EA580C" />
        </Style>
        <Style x:Key="DangerButton" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
            <Setter Property="Background" Value="{StaticResource BrushDanger}" />
            <Setter Property="BorderBrush" Value="{StaticResource BrushDangerDark}" />
        </Style>
        <Style TargetType="TextBox">
            <Setter Property="Margin" Value="0,4,0,8" />
            <Setter Property="Padding" Value="8,4" />
            <Setter Property="Background" Value="{StaticResource BrushSurface}" />
            <Setter Property="BorderBrush" Value="#CBD5E1" />
            <Setter Property="BorderThickness" Value="1" />
        </Style>
        <Style x:Key="CodeBox" TargetType="TextBox" BasedOn="{StaticResource {x:Type TextBox}}">
            <Setter Property="FontFamily" Value="Cascadia Mono" />
            <Setter Property="Background" Value="#0B1220" />
            <Setter Property="Foreground" Value="#E2E8F0" />
            <Setter Property="BorderBrush" Value="#0F172A" />
        </Style>
        <Style TargetType="ComboBox">
            <Setter Property="Margin" Value="0,4,0,8" />
            <Setter Property="Padding" Value="6,4" />
            <Setter Property="Background" Value="{StaticResource BrushSurface}" />
            <Setter Property="BorderBrush" Value="#CBD5E1" />
            <Setter Property="BorderThickness" Value="1" />
        </Style>
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource BrushText}" />
        </Style>
        <Style x:Key="SectionTitle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Margin" Value="0,0,0,8" />
        </Style>
        <Style x:Key="SubtleText" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource BrushMutedText}" />
            <Setter Property="FontSize" Value="12" />
        </Style>
        <Style TargetType="CheckBox">
            <Setter Property="Margin" Value="0,2,0,2" />
            <Setter Property="Foreground" Value="{StaticResource BrushText}" />
        </Style>
        <Style TargetType="GroupBox">
            <Setter Property="Margin" Value="0,0,0,12" />
            <Setter Property="Padding" Value="12" />
            <Setter Property="BorderBrush" Value="{StaticResource BrushBorder}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Background" Value="{StaticResource BrushSurface}" />
        </Style>
        <Style TargetType="TabItem">
            <Setter Property="Padding" Value="12,10" />
            <Setter Property="Margin" Value="6,4" />
            <Setter Property="Width" Value="210" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Foreground" Value="{StaticResource BrushMutedText}" />
            <Setter Property="HorizontalContentAlignment" Value="Left" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TabItem">
                        <Border x:Name="NavBorder"
                                Background="Transparent"
                                BorderBrush="Transparent"
                                BorderThickness="1"
                                CornerRadius="10"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter ContentSource="Header" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="NavBorder" Property="Background" Value="{StaticResource BrushSurface}" />
                                <Setter TargetName="NavBorder" Property="BorderBrush" Value="{StaticResource BrushBorder}" />
                                <Setter Property="Foreground" Value="{StaticResource BrushText}" />
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="NavBorder" Property="Background" Value="#E2E8F0" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="TabControl">
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Background" Value="{StaticResource BrushSurfaceMuted}" />
            <Setter Property="Padding" Value="8" />
        </Style>
        <Style x:Key="Card" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource BrushSurface}" />
            <Setter Property="BorderBrush" Value="{StaticResource BrushBorder}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="Padding" Value="14" />
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="12" ShadowDepth="1" Opacity="0.08" />
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="StatusBadge" TargetType="Border">
            <Setter Property="CornerRadius" Value="8" />
            <Setter Property="Padding" Value="6,2" />
            <Setter Property="Background" Value="#E2E8F0" />
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#0F172A" Padding="16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="CongNo Ops" Foreground="White" FontSize="20" FontWeight="Bold" />
                    <TextBlock Text="Mission Control" Foreground="#94A3B8" Margin="12,4,0,0" FontSize="12" />
                    <Border Background="#1E293B" CornerRadius="12" Padding="8,2" Margin="16,0,0,0" VerticalAlignment="Center">
                        <TextBlock Name="TxtActiveProfile" Text="Chưa kết nối" Foreground="#E2E8F0" FontSize="12" />
                    </Border>
                </StackPanel>
                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="Máy chủ" Foreground="#E2E8F0" Margin="0,0,8,0" VerticalAlignment="Center" />
                    <ComboBox Name="CmbProfiles" Width="220" DisplayMemberPath="Name" />
                    <Button Name="BtnConnect" Content="Kết nối" Margin="8,0,0,0" />
                    <StackPanel Orientation="Horizontal" Margin="12,0,0,0" VerticalAlignment="Center">
                        <Ellipse Name="DotConnection" Width="8" Height="8" Fill="#F59E0B" Margin="0,0,6,0" />
                        <TextBlock Name="TxtConnectStatus" Foreground="#E2E8F0" VerticalAlignment="Center" />
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Border>

        <TabControl Grid.Row="1" TabStripPlacement="Left" Background="{StaticResource BrushSurfaceMuted}">
            <TabItem Header="Tổng quan">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">
                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Tổng quan hệ thống" Style="{StaticResource SectionTitle}" />
                            <TextBlock Name="TxtLastRefresh" Grid.Column="1" Style="{StaticResource SubtleText}" VerticalAlignment="Center" />
                        </Grid>

                        <Border Style="{StaticResource Card}" Margin="0,0,0,12">
                            <StackPanel>
                                <TextBlock Text="Tác vụ nhanh" Style="{StaticResource SectionTitle}" />
                                <WrapPanel>
                                    <Button Name="BtnRefreshOverview" Content="Làm mới" Style="{StaticResource SecondaryButton}" />
                                    <Button Name="BtnHealth" Content="Kiểm tra Health" Style="{StaticResource SecondaryButton}" />
                                    <Button Name="BtnStatus" Content="Tải trạng thái" Style="{StaticResource SecondaryButton}" />
                                    <Button Name="BtnQuickDeployBackend" Content="Deploy Backend" Style="{StaticResource AccentButton}" />
                                    <Button Name="BtnQuickDeployFrontend" Content="Deploy Frontend" Style="{StaticResource AccentButton}" />
                                    <Button Name="BtnQuickRestartBackend" Content="Restart Backend" Style="{StaticResource SecondaryButton}" />
                                    <Button Name="BtnQuickBackupNow" Content="Backup ngay" Style="{StaticResource SecondaryButton}" />
                                </WrapPanel>
                            </StackPanel>
                        </Border>

                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Border Style="{StaticResource Card}" Margin="0,0,8,0">
                                <StackPanel>
                                    <TextBlock Text="CPU" Foreground="{StaticResource BrushMutedText}" />
                                    <TextBlock Name="TxtCpu" Text="--" FontSize="20" FontWeight="Bold" />
                                </StackPanel>
                            </Border>
                            <Border Grid.Column="1" Style="{StaticResource Card}" Margin="0,0,8,0">
                                <StackPanel>
                                    <TextBlock Text="RAM" Foreground="{StaticResource BrushMutedText}" />
                                    <TextBlock Name="TxtRam" Text="--" FontSize="20" FontWeight="Bold" />
                                </StackPanel>
                            </Border>
                            <Border Grid.Column="2" Style="{StaticResource Card}">
                                <StackPanel>
                                    <TextBlock Text="Disk" Foreground="{StaticResource BrushMutedText}" />
                                    <TextBlock Name="TxtDisk" Text="--" FontSize="20" FontWeight="Bold" />
                                </StackPanel>
                            </Border>
                        </Grid>

                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Border Style="{StaticResource Card}" Margin="0,0,8,0">
                                <StackPanel>
                                    <TextBlock Text="Backend" Foreground="{StaticResource BrushMutedText}" />
                                    <Border Name="BadgeBackendStatus" Style="{StaticResource StatusBadge}" Margin="0,4,0,4">
                                        <TextBlock Name="TxtBackendStatus" Text="--" FontSize="14" FontWeight="Bold" />
                                    </Border>
                                    <TextBlock Name="TxtBackendVersion" Text="" Foreground="#94A3B8" />
                                    <TextBlock Name="TxtRuntimeModeOverview" Text="" Foreground="#94A3B8" />
                                </StackPanel>
                            </Border>
                            <Border Grid.Column="1" Style="{StaticResource Card}" Margin="0,0,8,0">
                                <StackPanel>
                                    <TextBlock Text="Frontend" Foreground="{StaticResource BrushMutedText}" />
                                    <Border Name="BadgeFrontendStatus" Style="{StaticResource StatusBadge}" Margin="0,4,0,4">
                                        <TextBlock Name="TxtFrontendStatus" Text="--" FontSize="14" FontWeight="Bold" />
                                    </Border>
                                    <TextBlock Name="TxtFrontendVersion" Text="" Foreground="#94A3B8" />
                                </StackPanel>
                            </Border>
                            <Border Grid.Column="2" Style="{StaticResource Card}">
                                <StackPanel>
                                    <TextBlock Text="App Pool" Foreground="{StaticResource BrushMutedText}" />
                                    <Border Name="BadgeAppPoolStatusOverview" Style="{StaticResource StatusBadge}" Margin="0,4,0,4">
                                        <TextBlock Name="TxtAppPoolStatusOverview" Text="--" FontSize="14" FontWeight="Bold" />
                                    </Border>
                                    <TextBlock Text="IIS Worker" Foreground="{StaticResource BrushMutedText}" FontSize="11" />
                                </StackPanel>
                            </Border>
                        </Grid>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <GroupBox Header="Chi tiết Health" Margin="0,0,8,0">
                                <TextBox Name="TxtHealth" IsReadOnly="True" TextWrapping="Wrap" AcceptsReturn="True" Height="160" VerticalScrollBarVisibility="Auto" Style="{StaticResource CodeBox}" />
                            </GroupBox>
                            <GroupBox Grid.Column="1" Header="Trạng thái hệ thống">
                                <TextBox Name="TxtStatus" IsReadOnly="True" TextWrapping="Wrap" AcceptsReturn="True" Height="160" VerticalScrollBarVisibility="Auto" Style="{StaticResource CodeBox}" />
                            </GroupBox>
                        </Grid>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="Triển khai">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">
                        <GroupBox Header="Quy trình triển khai lần đầu">
                            <StackPanel>
                                <TextBlock Text="1) Cấu hình connection string + pg_bin (tab Cơ sở dữ liệu)." />
                                <TextBlock Text="2) Tạo database (tab Cơ sở dữ liệu)." />
                                <TextBlock Text="3) Triển khai Backend." />
                                <TextBlock Text="4) Chạy migrations (tab Cơ sở dữ liệu)." />
                                <TextBlock Text="5) Triển khai Frontend." />
                                <TextBlock Text="6) Kiểm tra /health + đăng nhập admin." />
                                <TextBlock Text="* Nếu dùng git mode: cấu hình repo path trước khi deploy." Style="{StaticResource SubtleText}" />
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="Nguồn cập nhật">
                            <StackPanel>
                                <TextBlock Text="Đường dẫn source (tuỳ chọn)" />
                                <TextBox Name="TxtUpdateSource" />
                                <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                    <CheckBox Name="ChkDeployBackup" Content="Tạo backup trước khi deploy" Margin="0,0,16,0" />
                                    <CheckBox Name="ChkDeployVerifyHealth" Content="Kiểm tra /health sau deploy" />
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="Ứng dụng cần thiết cho triển khai">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                    <Button Name="BtnLoadPrereqs" Content="Kiểm tra lại" Style="{StaticResource SecondaryButton}" />
                                    <TextBlock Name="TxtPrereqStatus" VerticalAlignment="Center" Margin="8,0,0,0" Style="{StaticResource SubtleText}" />
                                </StackPanel>
                                <ItemsControl Name="LstPrereqs">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Style="{StaticResource Card}" Margin="0,0,0,8">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="2*" />
                                                        <ColumnDefinition Width="1.2*" />
                                                        <ColumnDefinition Width="Auto" />
                                                    </Grid.ColumnDefinitions>
                                                    <StackPanel>
                                                        <TextBlock Text="{Binding Name}" FontWeight="SemiBold" />
                                                        <TextBlock Text="{Binding Description}" Style="{StaticResource SubtleText}" TextWrapping="Wrap" />
                                                        <TextBlock Text="{Binding Notes}" Style="{StaticResource SubtleText}" TextWrapping="Wrap" Margin="0,4,0,0" />
                                                    </StackPanel>
                                                    <StackPanel Grid.Column="1">
                                                        <TextBlock Text="{Binding StatusText}" FontWeight="SemiBold" />
                                                        <TextBlock Text="{Binding VersionText}" Style="{StaticResource SubtleText}" />
                                                    </StackPanel>
                                                    <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                                                        <Button Content="Cài đặt" Tag="{Binding Id}" Click="OnInstallPrereq" IsEnabled="{Binding CanInstall}" />
                                                        <Button Content="Mở link" Tag="{Binding DownloadUrl}" Click="OnOpenPrereqLink" Style="{StaticResource SecondaryButton}" />
                                                    </StackPanel>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </GroupBox>

                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                            <Button Name="BtnUpdateBackend" Content="Triển khai Backend" />
                            <Button Name="BtnUpdateFrontend" Content="Triển khai Frontend" />
                        </StackPanel>
                        <TextBox Name="TxtUpdateResult" IsReadOnly="True" AcceptsReturn="True" Height="220" VerticalScrollBarVisibility="Auto" TextWrapping="Wrap" Style="{StaticResource CodeBox}" />
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="Dịch vụ">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">
                        <Border Style="{StaticResource Card}" Margin="0,0,0,12">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Runtime mode:" FontWeight="SemiBold" Margin="0,0,8,0" />
                                <TextBlock Name="TxtRuntimeModeServices" Text="--" />
                            </StackPanel>
                        </Border>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <GroupBox Header="Backend Service" Margin="0,0,8,0">
                                <StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                        <Button Name="BtnBackendStart" Content="Start" />
                                        <Button Name="BtnBackendStop" Content="Stop" Style="{StaticResource DangerButton}" />
                                        <Button Name="BtnBackendRestart" Content="Restart" Style="{StaticResource SecondaryButton}" />
                                    </StackPanel>
                                    <Border Name="BadgeBackendServiceStatus" Style="{StaticResource StatusBadge}">
                                        <TextBlock Name="TxtBackendServiceStatus" Text="--" />
                                    </Border>
                                </StackPanel>
                            </GroupBox>

                            <GroupBox Grid.Column="1" Header="Frontend (IIS Site)" Margin="0,0,8,0">
                                <StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                        <Button Name="BtnFrontendStart" Content="Start" />
                                        <Button Name="BtnFrontendStop" Content="Stop" Style="{StaticResource DangerButton}" />
                                    </StackPanel>
                                    <Border Name="BadgeFrontendServiceStatus" Style="{StaticResource StatusBadge}">
                                        <TextBlock Name="TxtFrontendServiceStatus" Text="--" />
                                    </Border>
                                </StackPanel>
                            </GroupBox>

                            <GroupBox Grid.Column="2" Header="App Pool">
                                <StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                        <Button Name="BtnAppPoolStart" Content="Start Pool" />
                                        <Button Name="BtnAppPoolStop" Content="Stop Pool" Style="{StaticResource DangerButton}" />
                                        <Button Name="BtnAppPoolRecycle" Content="Recycle" Style="{StaticResource SecondaryButton}" />
                                    </StackPanel>
                                    <Border Name="BadgeAppPoolStatus" Style="{StaticResource StatusBadge}">
                                        <TextBlock Name="TxtAppPoolStatus" Text="--" />
                                    </Border>
                                </StackPanel>
                            </GroupBox>
                        </Grid>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="Frontend">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <GroupBox Header="URL truy cập" Margin="0,0,8,12">
                                <StackPanel>
                                    <TextBlock Text="Frontend URL" />
                                    <StackPanel Orientation="Horizontal">
                                        <TextBox Name="TxtFrontendUrl" Width="360" />
                                        <Button Name="BtnOpenFrontend" Content="Mở" />
                                    </StackPanel>
                                    <TextBlock Name="TxtEndpointStatus" Foreground="{StaticResource BrushMutedText}" />
                                </StackPanel>
                            </GroupBox>

                            <GroupBox Grid.Column="1" Header="Cấu hình IIS" Margin="0,0,0,12">
                                <StackPanel>
                                    <TextBlock Text="IIS Site Name" />
                                    <TextBox Name="TxtIisSiteName" />
                                    <TextBlock Text="App Pool Name (tuỳ chọn)" />
                                    <TextBox Name="TxtAppPoolName" />
                                    <TextBlock Name="TxtAppPoolValidation" Style="{StaticResource SubtleText}" Margin="0,0,0,8" />
                                    <StackPanel Orientation="Horizontal">
                                        <Button Name="BtnSaveIisConfig" Content="Lưu cấu hình" />
                                        <TextBlock Name="TxtIisConfigStatus" VerticalAlignment="Center" Margin="8,0,0,0" />
                                    </StackPanel>
                                </StackPanel>
                            </GroupBox>

                            <GroupBox Grid.Row="1" Header="Maintenance Mode" Margin="0,0,8,12">
                                <StackPanel>
                                    <CheckBox Name="ChkMaintenanceEnabled" Content="Bật chế độ bảo trì" Margin="0,0,0,4" />
                                    <TextBlock Text="Thông điệp" />
                                    <TextBox Name="TxtMaintenanceMessage" />
                                    <StackPanel Orientation="Horizontal">
                                        <Button Name="BtnSaveMaintenance" Content="Lưu" />
                                        <TextBlock Name="TxtMaintenanceStatus" VerticalAlignment="Center" Margin="8,0,0,0" />
                                    </StackPanel>
                                </StackPanel>
                            </GroupBox>

                            <GroupBox Grid.Row="1" Grid.Column="1" Header="Nén &amp; Cache" Margin="0,0,0,12">
                                <StackPanel>
                                    <CheckBox Name="ChkCompressionEnabled" Content="Bật nén IIS" Margin="0,0,0,4" />
                                    <StackPanel Orientation="Horizontal">
                                        <Button Name="BtnSaveCompression" Content="Cập nhật" />
                                        <Button Name="BtnClearFrontendCache" Content="Xoá cache nén" />
                                        <TextBlock Name="TxtCompressionStatus" VerticalAlignment="Center" Margin="8,0,0,0" />
                                    </StackPanel>
                                </StackPanel>
                            </GroupBox>

                            <GroupBox Grid.Row="2" Grid.ColumnSpan="2" Header="IIS Binding">
                                <StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                        <Button Name="BtnLoadBindings" Content="Load Bindings" />
                                        <TextBlock Name="TxtBindingsStatus" VerticalAlignment="Center" Margin="8,0,0,0" />
                                    </StackPanel>
                                    <WrapPanel>
                                        <StackPanel Orientation="Horizontal" Margin="0,0,12,8">
                                            <TextBlock Text="Protocol" VerticalAlignment="Center" Margin="0,0,6,0" />
                                            <TextBox Name="TxtBindingProtocol" Width="80" />
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" Margin="0,0,12,8">
                                            <TextBlock Text="IP" VerticalAlignment="Center" Margin="0,0,6,0" />
                                            <TextBox Name="TxtBindingIp" Width="120" />
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" Margin="0,0,12,8">
                                            <TextBlock Text="Port" VerticalAlignment="Center" Margin="0,0,6,0" />
                                            <TextBox Name="TxtBindingPort" Width="80" />
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" Margin="0,0,12,8">
                                            <TextBlock Text="Host" VerticalAlignment="Center" Margin="0,0,6,0" />
                                            <TextBox Name="TxtBindingHost" Width="160" />
                                        </StackPanel>
                                        <CheckBox Name="ChkReplaceBinding" Content="Replace existing" Margin="0,0,12,8" />
                                        <Button Name="BtnApplyBinding" Content="Apply Binding" />
                                    </WrapPanel>
                                    <TextBox Name="TxtBindings" AcceptsReturn="True" IsReadOnly="True" VerticalScrollBarVisibility="Auto" Height="200" Style="{StaticResource CodeBox}" />
                                </StackPanel>
                            </GroupBox>
                        </Grid>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="Backend">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <GroupBox Header="URL truy cập" Margin="0,0,8,12">
                                <StackPanel>
                                    <TextBlock Text="Backend URL" />
                                    <StackPanel Orientation="Horizontal">
                                        <TextBox Name="TxtBackendUrl" Width="360" />
                                        <Button Name="BtnOpenBackend" Content="Mở" />
                                        <Button Name="BtnSaveEndpoints" Content="Lưu" />
                                    </StackPanel>
                                    <TextBlock Name="TxtBackendEndpointStatus" Foreground="{StaticResource BrushMutedText}" />
                                </StackPanel>
                            </GroupBox>

                            <GroupBox Grid.Column="1" Header="Runtime + Log level" Margin="0,0,0,12">
                                <StackPanel>
                                    <TextBlock Text="Runtime mode" />
                                    <ComboBox Name="CmbRuntimeMode" Width="200" />

                                    <StackPanel Name="PnlDockerRuntime">
                                        <TextBlock Text="Docker compose file" />
                                        <TextBox Name="TxtDockerComposeFile" />
                                        <TextBlock Text="Docker working directory" />
                                        <TextBox Name="TxtDockerWorkingDirectory" />
                                        <TextBlock Text="Docker project name" />
                                        <TextBox Name="TxtDockerProjectName" />
                                        <TextBlock Text="Backend service name" />
                                        <TextBox Name="TxtDockerBackendService" />
                                        <TextBlock Text="Frontend service name" />
                                        <TextBox Name="TxtDockerFrontendService" />
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                        <Button Name="BtnSaveRuntimeConfig" Content="Lưu runtime" Style="{StaticResource SecondaryButton}" />
                                        <TextBlock Name="TxtRuntimeConfigStatus" VerticalAlignment="Center" Margin="8,0,0,0" />
                                    </StackPanel>

                                    <Separator Margin="0,8,0,8" />

                                    <TextBlock Text="Log level" />
                                    <ComboBox Name="CmbLogLevel" Width="200" />
                                    <StackPanel Orientation="Horizontal">
                                        <Button Name="BtnSaveLogLevel" Content="Cập nhật" />
                                        <TextBlock Name="TxtLogLevelStatus" VerticalAlignment="Center" Margin="8,0,0,0" />
                                    </StackPanel>
                                </StackPanel>
                            </GroupBox>

                            <GroupBox Grid.Row="1" Header="Job nền" Margin="0,0,8,12">
                                <StackPanel>
                                    <CheckBox Name="ChkJobReminders" Content="Gửi nhắc công nợ" />
                                    <CheckBox Name="ChkJobInvoiceReconcile" Content="Đối soát hoá đơn" />
                                    <StackPanel Orientation="Horizontal">
                                        <Button Name="BtnSaveJobs" Content="Lưu cấu hình" />
                                        <TextBlock Name="TxtJobStatus" VerticalAlignment="Center" Margin="8,0,0,0" />
                                    </StackPanel>
                                </StackPanel>
                            </GroupBox>

                            <GroupBox Grid.Row="1" Grid.Column="1" Header="Service config (Advanced)" Name="GrpServiceConfig" Margin="0,0,0,12">
                                <StackPanel>
                                    <TextBlock Text="Start mode" />
                                    <ComboBox Name="CmbServiceStartMode" Width="200" />
                                    <TextBlock Text="Service account" />
                                    <TextBox Name="TxtServiceAccount" />
                                    <TextBlock Text="Service password" />
                                    <PasswordBox Name="TxtServicePassword" />
                                    <StackPanel Orientation="Horizontal">
                                        <Button Name="BtnSaveServiceConfig" Content="Lưu" />
                                        <TextBlock Name="TxtServiceConfigStatus" VerticalAlignment="Center" Margin="8,0,0,0" />
                                    </StackPanel>
                                </StackPanel>
                            </GroupBox>

                            <GroupBox Grid.Row="2" Grid.ColumnSpan="2" Header="Recovery (Advanced)" Name="GrpRecovery">
                                <StackPanel>
                                    <WrapPanel Margin="0,0,0,8">
                                        <StackPanel Orientation="Horizontal" Margin="0,0,12,8">
                                            <TextBlock Text="Lần 1" VerticalAlignment="Center" Margin="0,0,6,0" />
                                            <ComboBox Name="CmbRecoveryFirst" Width="160" />
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" Margin="0,0,12,8">
                                            <TextBlock Text="Lần 2" VerticalAlignment="Center" Margin="0,0,6,0" />
                                            <ComboBox Name="CmbRecoverySecond" Width="160" />
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" Margin="0,0,12,8">
                                            <TextBlock Text="Lần 3" VerticalAlignment="Center" Margin="0,0,6,0" />
                                            <ComboBox Name="CmbRecoveryThird" Width="160" />
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" Margin="0,0,12,8">
                                            <TextBlock Text="Reset counter (ngày)" VerticalAlignment="Center" Margin="0,0,6,0" />
                                            <TextBox Name="TxtRecoveryResetDays" Width="120" />
                                        </StackPanel>
                                    </WrapPanel>
                                    <StackPanel Orientation="Horizontal">
                                        <Button Name="BtnSaveRecovery" Content="Lưu" />
                                        <TextBlock Name="TxtRecoveryStatus" VerticalAlignment="Center" Margin="8,0,0,0" />
                                    </StackPanel>
                                </StackPanel>
                            </GroupBox>
                        </Grid>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="Cơ sở dữ liệu">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">
                        <GroupBox Header="Khởi tạo CSDL">
                            <StackPanel>
                                <TextBlock Text="Database mục tiêu" />
                                <TextBlock Name="TxtDatabaseName" FontWeight="SemiBold" />
                                <TextBlock Name="TxtMigrationPath" Style="{StaticResource SubtleText}" Margin="0,2,0,8" />
                                <WrapPanel>
                                    <Button Name="BtnCheckDatabase" Content="Kiểm tra kết nối" Style="{StaticResource SecondaryButton}" />
                                    <Button Name="BtnCreateDatabase" Content="Tạo database" />
                                    <Button Name="BtnRunMigrations" Content="Chạy migrations" Style="{StaticResource AccentButton}" />
                                </WrapPanel>
                                <TextBlock Name="TxtDatabaseInitStatus" Style="{StaticResource SubtleText}" Margin="0,8,0,0" />
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="Lịch backup">
                            <StackPanel>
                                <CheckBox Name="ChkBackupScheduleEnabled" Content="Bật backup tự động" />
                                <TextBlock Text="Giờ chạy (HH:mm)" />
                                <TextBox Name="TxtBackupTimeOfDay" Width="120" />
                                <TextBlock Text="Số bản lưu" />
                                <TextBox Name="TxtBackupRetention" Width="120" />
                                <StackPanel Orientation="Horizontal">
                                    <Button Name="BtnSaveBackupSchedule" Content="Lưu" />
                                    <TextBlock Name="TxtBackupScheduleStatus" VerticalAlignment="Center" Margin="8,0,0,0" />
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="Backup thủ công">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2*" />
                                    <ColumnDefinition Width="3*" />
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0">
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                        <Button Name="BtnRefreshBackups" Content="Refresh" />
                                        <Button Name="BtnCreateBackup" Content="Create Backup" />
                                        <Button Name="BtnRunBackupNow" Content="Run Now" />
                                    </StackPanel>
                                    <ListBox Name="LstBackups" Height="260" />
                                </StackPanel>
                                <StackPanel Grid.Column="1" Margin="16,0,0,0">
                                    <TextBlock Text="Restore từ file" />
                                    <TextBox Name="TxtRestorePath" />
                                    <Button Name="BtnRestore" Content="Restore" Style="{StaticResource DangerButton}" />
                                    <TextBlock Name="TxtBackupResult" TextWrapping="Wrap" />
                                </StackPanel>
                            </Grid>
                        </GroupBox>

                        <GroupBox Header="SQL Console (Advanced)" Name="GrpSqlConsole">
                            <StackPanel>
                                <TextBlock Text="Câu lệnh SQL" />
                                <TextBox Name="TxtSqlInput" AcceptsReturn="True" Height="120" Style="{StaticResource CodeBox}" />
                                <StackPanel Orientation="Horizontal" Margin="0,4,0,4">
                                    <Button Name="BtnSqlPreview" Content="Preview" Style="{StaticResource SecondaryButton}" />
                                    <Button Name="BtnSqlExecute" Content="Execute" Style="{StaticResource DangerButton}" />
                                    <TextBlock Name="TxtSqlStatus" VerticalAlignment="Center" Margin="8,0,0,0" />
                                </StackPanel>
                                <TextBox Name="TxtSqlOutput" AcceptsReturn="True" Height="200" VerticalScrollBarVisibility="Auto" Style="{StaticResource CodeBox}" />
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="Nhật ký">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                            <TextBlock Text="Path" VerticalAlignment="Center" Margin="0,0,8,0" />
                            <TextBox Name="TxtLogPath" Width="360" />
                            <TextBlock Text="Lines" VerticalAlignment="Center" Margin="8,0,8,0" />
                            <TextBox Name="TxtLogLines" Width="80" />
                            <Button Name="BtnLoadLogs" Content="Load" />
                        </StackPanel>
                        <TextBox Name="TxtLogs" AcceptsReturn="True" Height="360" VerticalScrollBarVisibility="Auto" Style="{StaticResource CodeBox}" />
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="Cài đặt">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">
                        <GroupBox Header="Profile kết nối">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="1.2*" />
                                    <ColumnDefinition Width="2*" />
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <ListBox Name="LstProfiles" DisplayMemberPath="Name" Height="180" />
                                    <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                        <Button Name="BtnProfileAdd" Content="Thêm" />
                                        <Button Name="BtnProfileDelete" Content="Xoá" />
                                        <Button Name="BtnProfileSetActive" Content="Dùng profile" />
                                    </StackPanel>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Margin="16,0,0,0">
                                    <TextBlock Text="Tên" />
                                    <TextBox Name="TxtProfileName" />
                                    <TextBlock Text="Base URL" />
                                    <TextBox Name="TxtProfileBaseUrl" />
                                    <TextBlock Text="API Key" />
                                    <TextBox Name="TxtProfileApiKey" />
                                    <StackPanel Orientation="Horizontal">
                                        <Button Name="BtnProfileSave" Content="Lưu" />
                                        <TextBlock Name="TxtProfileStatus" VerticalAlignment="Center" Margin="8,0,0,0" />
                                    </StackPanel>
                                </StackPanel>
                            </Grid>
                        </GroupBox>

                        <GroupBox Header="Tuỳ chọn">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Auto refresh (giây)" VerticalAlignment="Center" Margin="0,0,8,0" />
                                    <TextBox Name="TxtAutoRefreshSeconds" Width="120" />
                                </StackPanel>
                                <CheckBox Name="ChkAdvancedMode" Content="Bật chế độ nâng cao" />
                                <StackPanel Orientation="Horizontal">
                                    <Button Name="BtnSaveSettings" Content="Lưu thiết lập" />
                                    <TextBlock Name="TxtSettingsStatus" VerticalAlignment="Center" Margin="8,0,0,0" />
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>
    </Grid>
</Window>
